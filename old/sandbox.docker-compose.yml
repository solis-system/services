services:
  wiki:
    container_name: wiki
    restart: always
    image: ghcr.io/requarks/wiki:2
    environment:
      DB_TYPE: mysql
      DB_HOST: mariadb
      DB_PORT: 3306
      DB_USER: root
      DB_PASS: 9EAKrvk2rF@kv3
      DB_NAME: wiki
    networks:
      - proxy-network

  signaturepdf:
    container_name: signaturepdf
    restart: always
    build:
      context: signaturepdf
      dockerfile: Dockerfile
    ports:
      - "8095:80"
    environment:
      - SERVERNAME=signature.lola-france.fr
      - UPLOAD_MAX_FILESIZE=48M
      - POST_MAX_SIZE=48M
      - MAX_FILE_UPLOADS=401
      - PDF_STORAGE_PATH=/data
    networks:
      - proxy-network
  freescout-app:
    image: tiredofit/freescout
    container_name: freescout-app
    ports:
      - "8081:80"
    links:
      - freescout-db
    environment:
      - VIRTUAL_HOST=freescout.localhost
      - VIRTUAL_NETWORK=proxy-network
      - VIRTUAL_PORT=80
      - CONTAINER_NAME=freescout-app
      - DB_HOST=freescout-db
      - DB_NAME=freescout
      - DB_USER=freescout
      - DB_PASS=freescout

      - SITE_URL=https://freescout.localhost
      - ADMIN_EMAIL=admin@admin.com
      - ADMIN_PASS=freescout
      - ENABLE_SSL_PROXY=FALSE
      - DISPLAY_ERRORS=TRUE
      - TIMEZONE=America/Vancouver
    networks:
      - proxy-network
    restart: always

  freescout-db:
    image: tiredofit/mariadb
    container_name: freescout-db
    volumes:
      - ./db:/var/lib/mysql
    environment:
      - ROOT_PASS=password
      - DB_NAME=freescout
      - DB_USER=freescout
      - DB_PASS=freescout

      - CONTAINER_NAME=freescout-db
    networks:
      - proxy-network
    restart: always

  freescout-db-backup:
    container_name: freescout-db-backup
    image: tiredofit/db-backup
    links:
      - freescout-db
    environment:
      - CONTAINER_NAME=freescout-db-backup
      - DB_HOST=freescout-db
      - DB_TYPE=mariadb
      - DB_NAME=freescout
      - DB_USER=freescout
      - DB_PASS=freescout
      - DB01_BACKUP_INTERVAL=1440
      - DB01_BACKUP_BEGIN=0000
      - DB_CLEANUP_TIME=8640
      - COMPRESSION=BZ
      - MD5=TRUE
    networks:
      - proxy-network
    restart: always

networks:
  proxy-network:
    external: true
